{
    "name": "leoloso/pop-app-wp",
    "type": "project",
    "description": "Bootstrap a PoP Application for WordPress",
    "keywords": [
        "PoP",
        "WordPress",
        "bootstrap",
        "components",
        "component-driven design",
        "App",
        "Application"
    ],
    "homepage": "https://github.com/leoloso/pop-app-wp",
    "license": "MIT",
    "authors": [
        {
            "name": "Leonardo Losoviz",
            "email": "leo@getpop.org",
            "homepage": "https://getpop.org"
        }
    ],
    "minimum-stability": "dev",
    "prefer-stable": true,
    "repositories": [
        {
            "type": "composer",
            "url": "https://wpackagist.org"
        }
    ],
    "require": {
        "php": "~7.1",
        "getpop/engine-symfony": "dev-master",
        "getpop/engine-wp": "dev-master",
        "getpop/spa": "dev-master",
        "getpop/configurationengine": "dev-master",
        "getpop/base36definitionresolver": "dev-master",
        "getpop/emojidefinitionresolver": "dev-master",
        "getpop/persistentdefinitions": "dev-master",
        "getpop/commentmeta-wp": "dev-master",
        "getpop/comments-wp": "dev-master",
        "getpop/pages-wp": "dev-master",
        "getpop/postmeta-wp": "dev-master",
        "getpop/posts-wp": "dev-master",
        "getpop/taxonomies-wp": "dev-master",
        "getpop/taxonomymeta-wp": "dev-master",
        "getpop/taxonomyquery-wp": "dev-master",
        "getpop/usermeta-wp": "dev-master",
        "getpop/users-wp": "dev-master",
        "johnpbloch/wordpress": ">=5.2"
    },
    "extra": {
        "wordpress-install-dir": "wp",
        "branch-alias": {
            "dev-master": "1.0-dev"
        },
        "installer-paths": {
            "wp/wp-content/mu-plugins/{$name}/": [
                "type:wordpress-muplugin"
            ],
            "wp/wp-content/plugins/{$name}/": [
                "type:wordpress-plugin"
            ],
            "wp/wp-content/themes/{$name}/": [
                "type:wordpress-theme"
            ]
        }
    },
    "config": {
        "sort-packages": true
    },
    "scripts": {
        "post-root-package-install": [
            "php -r \"function random_str(\\$length, \\$keyspace = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&()*+,-./:;<=>?@{|}~') { \\$pieces = []; \\$max = mb_strlen(\\$keyspace, '8bit') - 1; for (\\$i = 0; \\$i < \\$length; ++\\$i) { \\$pieces []= \\$keyspace[random_int(0, \\$max)]; } return implode('', \\$pieces); } \\$fp = fopen('wp-config.php', 'r'); \\$buffer = fread(\\$fp, 120000); fclose(\\$fp); \\$lines = explode('\n', \\$buffer); \\$replaceitems = [['line' => 26, 'from' => 'database_name_here', 'to' => '$DB_NAME'], ['line' => 29, 'from' => 'username_here', 'to' => '$DB_USER'], ['line' => 32, 'from' => 'password_here', 'to' => '$DB_PASSWORD']]; if ('$GENERATE_SALTS' === 'true') { for(\\$i=52;\\$i<=59;\\$i++) { \\$replaceitems[] = ['line' => \\$i, 'from' => 'put your unique phrase here', 'to' => random_str(64)]; }} foreach(\\$replaceitems as \\$replaceitem) { if (\\$replaceitem['to']) { \\$lines[\\$replaceitem['line']-1] = str_replace(\\$replaceitem['from'], \\$replaceitem['to'], \\$lines[\\$replaceitem['line']-1]); } } \\$fp = fopen('wp-config.php', 'w'); \\$buffer = implode('\n', \\$lines).'\n'; fwrite(\\$fp, \\$buffer); fclose(\\$fp);\"",
            "php -r \"\\$lines = []; if ('$ENV' === 'PROD') { \\$lines = ['POP_SERVER_USEAPPSHELL' => 'false', 'POP_SERVER_USESERVICEWORKERS' => 'true', 'POP_SERVER_USEPROGRESSIVEBOOTING' => 'true', 'POP_SERVER_USECODESPLITTING' => 'true', 'POP_SERVER_GENERATECODESPLITTINGFILES' => 'false', 'POP_SERVER_GENERATEBUNDLEFILES' => 'false', 'POP_SERVER_GENERATEBUNDLEGROUPFILES' => 'true', 'POP_SERVER_GENERATEBUNDLEFILESONRUNTIME' => 'true', 'POP_SERVER_GENERATELOADINGFRAMERESOURCEMAPPING' => 'false', 'POP_SERVER_ENQUEUEFILESTYPE' => 'bundlegroup', 'POP_SERVER_SCRIPTSAFTERHTML' => 'true', 'POP_SERVER_USESERVERSIDERENDERING' => 'true', 'POP_SERVER_USECACHE' => 'true', 'POP_SERVER_USEMINIFIEDRESOURCES' => 'true', 'POP_SERVER_ACCESSEXTERNALCDNRESOURCES' => 'false', 'POP_SERVER_USEBUNDLEDRESOURCES' => 'true', 'POP_SERVER_EXTRACTRESPONSEINTOJSFILESONRUNTIME' => 'false', 'POP_SERVER_REMOVEDATABASESFROMOUTPUT' => 'true', 'POP_SERVER_RESOURCESINCLUDETYPE' => 'header', 'POP_SERVER_DISABLEDEFINITIONRESOLVER' => 'false', 'POP_SERVER_DISABLEPERSISTENTDEFINITIONS' => 'false', 'POP_SERVER_SAVEDEFINITIONFILEONEACHREQUEST' => 'false', 'POP_SERVER_COMPACTRESPONSEJSONKEYS' => 'false', 'POP_SERVER_USELOCALSTORAGE' => 'true', 'POP_SERVER_FORCESSL' => 'true', 'POP_SERVER_ENABLECONFIGBYPARAMS' => 'false', 'POP_SERVER_DISABLEJS' => 'false', 'POP_SERVER_SKIPLOADINGFRAMERESOURCES' => 'true', 'POP_SERVER_BUNDLECHUNKSIZE' => 4, 'POP_SERVER_LOADDYNAMICALLYGENERATEDRESOURCEFILES' => 'true', 'POP_SERVER_PRELOADPAGES' => 'true', 'POP_SERVER_THROWEXCEPTIONONTEMPLATEERROR' => 'false', 'POP_SERVER_ENABLEEXTRAROUTESBYPARAMS' => 'false', 'POP_SERVER_FAILIFSUBCOMPONENTDATALOADERUNDEFINED' => 'false', 'POP_MAILER_AWS_SERVER_ENABLESENDINGEMAILS' => 'true', 'POP_SERVER_ENABLEAPI' => 'true'];} else { \\$lines = ['POP_SERVER_USEAPPSHELL' => 'false', 'POP_SERVER_USESERVICEWORKERS' => 'false', 'POP_SERVER_USEPROGRESSIVEBOOTING' => 'false', 'POP_SERVER_USECODESPLITTING' => 'false', 'POP_SERVER_GENERATECODESPLITTINGFILES' => 'true', 'POP_SERVER_GENERATEBUNDLEFILES' => 'false', 'POP_SERVER_GENERATEBUNDLEGROUPFILES' => 'false', 'POP_SERVER_GENERATEBUNDLEFILESONRUNTIME' => 'false', 'POP_SERVER_GENERATELOADINGFRAMERESOURCEMAPPING' => 'false', 'POP_SERVER_ENQUEUEFILESTYPE' => 'bundlegroup', 'POP_SERVER_SCRIPTSAFTERHTML' => 'false', 'POP_SERVER_USESERVERSIDERENDERING' => 'false', 'POP_SERVER_USECACHE' => 'false', 'POP_SERVER_USEMINIFIEDRESOURCES' => 'false', 'POP_SERVER_ACCESSEXTERNALCDNRESOURCES' => 'false', 'POP_SERVER_USEBUNDLEDRESOURCES' => 'false', 'POP_SERVER_EXTRACTRESPONSEINTOJSFILESONRUNTIME' => 'false', 'POP_SERVER_REMOVEDATABASESFROMOUTPUT' => 'true', 'POP_SERVER_RESOURCESINCLUDETYPE' => 'header', 'POP_SERVER_DISABLEDEFINITIONRESOLVER' => 'true', 'POP_SERVER_DISABLEPERSISTENTDEFINITIONS' => 'true', 'POP_SERVER_SAVEDEFINITIONFILEONEACHREQUEST' => 'false', 'POP_SERVER_COMPACTRESPONSEJSONKEYS' => 'false', 'POP_SERVER_USELOCALSTORAGE' => 'false', 'POP_SERVER_FORCESSL' => 'false', 'POP_SERVER_ENABLECONFIGBYPARAMS' => 'false', 'POP_SERVER_DISABLEJS' => 'false', 'POP_SERVER_SKIPLOADINGFRAMERESOURCES' => 'true', 'POP_SERVER_BUNDLECHUNKSIZE' => 4, 'POP_SERVER_LOADDYNAMICALLYGENERATEDRESOURCEFILES' => 'true', 'POP_SERVER_PRELOADPAGES' => 'true', 'POP_SERVER_THROWEXCEPTIONONTEMPLATEERROR' => 'true', 'POP_SERVER_ENABLEEXTRAROUTESBYPARAMS' => 'false', 'POP_SERVER_FAILIFSUBCOMPONENTDATALOADERUNDEFINED' => 'true', 'POP_MAILER_AWS_SERVER_ENABLESENDINGEMAILS' => 'false', 'POP_SERVER_ENABLEAPI' => 'true'];} \\$output = ''; foreach(\\$lines as \\$variable => \\$value) { \\$output .= \\$variable.'='.\\$value.'\n'; } \\$fp = fopen('config\/.env', 'w'); fwrite(\\$fp, \\$output); fclose(\\$fp);\""
        ]
    }
}
